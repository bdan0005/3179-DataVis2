<!DOCTYPE html>
<html lang="en">

<head>
  <title>FIT3179 Data Visualisation 2 - Fertility in Australia</title>
  <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Google font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap" rel="stylesheet">

  <!-- CSS file -->
  <link rel="stylesheet" type="text/css" href="./styles.css">

</head>

<body>

  <div class="page">

    <!-- Header -->
    <div class="header">
        <div class="decorated-header">Fertility</div>
        <div class="base-header">in Australia</div>
    </div>

    <hr>

    <!-- Overview -->
    <div class="overview">
        <div class="overview-desc">
            <p>The world is facing a fertility crisis, with declining birth rates in many countries, including Australia. Economic uncertainty, delayed family planning, and shifting societal values contribute to this trend. As populations age and birth rates fall, concerns arise about workforce shortages and economic growth. Australia and other nations are grappling with the long-term impact, prompting governments to introduce policies aimed at encouraging higher fertility rates and addressing the challenges posed by aging demographics.</p>
        </div>
        <div class="isotype">
            <div id="vis3"></div>
            <div class="isotype-desc-container">
              <div class="isotype-desc-1">7</div>
              <div class="isotype-desc-2">in</div>
              <div class="isotype-desc-3">10</div> 
              <div class="isotype-desc-4">women over 15 years of age in Australia are</div>
              <div class="isotype-desc-5">mothers.</div>
            </div>
        </div>
    </div>

    <!-- Australia vs. The World -->
    <div class="global">
      <div class="global-header">
        <hr>
        <h2>Australia vs. The World</h2>
        <hr>
      </div>
      <div class="global-choropleth">
        <div id="vis2" class="choropleth"></div>
        <div class="choropleth-desc">
          <div class="choropleth-guide">➤ Hover over the map to highlight a country</div>
          <p>As of 2023, <strong>Australia</strong> has the <strong>151st</strong> highest birth rate out of 255 countries.</p>
          <p>The countries with the <strong>highest</strong> birth rate are <strong>Central Africa</strong> (46.358 per 1000 people) and <strong>Somalia</strong> (42.964 per 1000 people), 
            whilst the countries with the <strong>lowest</strong> recorded birth rate are <strong>South Korea</strong> (4.568 per 1000 people) and the <strong>Vatican City</strong> (4.211 per 1000 people).</p>
        </div>
      </div>
    </div>

    <!-- Fertility Across the States -->
    <div class="states">
      <div class="states-header">
        <hr>
        <h2>Fertility Across the Nation</h2>
        <hr>
      </div>
      <div class="states-body">
        <div class="states-overview">
          <div class="states-subheader">Fertility In The States and Territories</div>
          <p>
            Australia's fertility rates have been declining over the past few decades, with the current 
            national average around <strong>1.63 children per woman</strong>. The regions Queensland, the Northern Territory and New South Wales show slightly higher rates.
          </p>
          <div class="parallel-guide">➤ Click on an item in the legend to highlight<br>
            ➤ Hover on the circles to see values</div>
          <div id="vis1" class="parallel-coord"></div>
        </div>
        <div class="state-births">
          <div class="state-births-subheader">Births in the States and Territories</div>
          <div class="births-guide1">➤ Use sliders to adjust year range</div>
          <div class="births-guide2">➤ Hover on the circles to highlight and see values</div>
          <div id="vis6" class="state-births-plot"></div>          
        </div>
      </div>
      <div class="states-graphs">
        <div class="nation-subheader">National Births and Fertility</div>
        <div class="nation-body">
          <div class="tabs-container">
            <div class="tabs">
                <button class="tab-button active" onclick="showTab('births')">Births</button>
                <button class="tab-button" onclick="showTab('fertility')">Fertility Rate</button>
            </div>
        
            <div id="births" class="tab-content active">
              <div id="vis4" class="line-births"></div>
            </div>
        
            <div id="fertility" class="tab-content">
              <div id="vis5" class="line-fertility"></div>
            </div>
          </div>
          <div class="nation-desc">
            <div class="line-guide1">➤ Press tabs to switch between charts</div>
            <div class="line-guide1">➤ Use sliders to adjust year range</div>
            <div class="line-guide2">➤ Hover on the circles to see values</div>
            <p>Overall, there has been a noticeable upward trend in births over time, accompanied by a gradual decline in the fertility rate. Recently, both registered births and the fertility rate have stabilized, showing minimal growth. Notably, a decline in both births and fertility rates was observed in 2020, coinciding with the onset of the COVID-19 pandemic, which imposed social distancing measures that limited close contact.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- The Parents of Australia -->
    <div class="parents">
      <div class="parents-header">
        <hr>
        <h2>The Parents of Australia</h2>
        <hr>
      </div>
      <div class="parents-body">
        <div class="parents-age">
          <div class="age-subheader">Median Age</div>
          <p>From 2000 to 2022, the median age of mothers in Australia has increased from <strong>29.8</strong> to <strong>31.9</strong>.
          In the same time, the median age of fathers has increased from <strong>32.2</strong> to <strong>33.7</strong>.
          Although men have consistently fathered children at an older age than women, there has been a noticeable 
          trend toward Australians choosing to have children later in life.</p>
          <div class="age-guide">➤ Hover on the circles to see values</div>
          <div id="vis7" class="age-dotplot"></div>
        </div>
        <div class="parents-fertility">
          <div class="fertility-subheader">Fertility by Age Group</div>
          <p>In 2022, the age group with the highest fertility rate for both mothers and fathers is 30-34. 
            Interestingly, fathers maintain high fertility rates well into their later years, while the 
            fertility of women declines significantly in the oldest age group of 45-49.</p>
            <div class="fertility-guide1">➤ Click on the items in the legend to filter</div>
            <div class="fertility-guide2">➤ Hover over the bars to see values</div>
          <div id="vis8" class="fertility-butterfly"></div>
        </div>
      </div>
    </div>

    <hr>
    <p>Made by Brenda Dang using Vegalite. <br>
      I would like to acknowledge the assistance of OpenAI's ChatGPT in creating the charts for this visualisation. <br>
      Data source: <a href="https://www.abs.gov.au/statistics/people/population/births-australia/2022">https://www.abs.gov.au/statistics/people/population/births-australia/2022</a></p>

  <!-- Script -->
  <script type="text/javascript">
    var specVis1 = "./parallel_coord.json";
    var specVis2 = "./choropleth_map.json";
    var specVis3 = "./pictogram.json";
    var specVis4 = "./line_births.json";
    var specVis5 = "./line_fertility.json";
    var specVis6 = "./state-births.json";
    var specVis7 = "./dotplot.json";
    var specVis8 = "./butterfly_chart.json";

    vegaEmbed('#vis1', specVis1, { "actions": false });

    vegaEmbed('#vis2', specVis2, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#vis3', specVis3, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#vis4', specVis4, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#vis5', specVis5, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#vis6', specVis6, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#vis7', specVis7, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#vis8', specVis8, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    
    // Tabs function
    function showTab(tabName) {
      // Get all tab content and buttons
      const tabs = document.querySelectorAll('.tab-content');
      const buttons = document.querySelectorAll('.tab-button');

      // Hide all tab contents and remove active class from buttons
      tabs.forEach(tab => {
          tab.classList.remove('active');
      });
      buttons.forEach(button => {
          button.classList.remove('active');
      });

      // Show the selected tab
      document.getElementById(tabName).classList.add('active');

      // Capitalize the first letter of tabName for matching the button's textContent
      const formattedTabName = tabName === 'fertility' ? 'Fertility Rate' : 'Births';

      // Find the corresponding button and set it to active
      const activeButton = [...buttons].find(button => button.textContent.trim() === formattedTabName);
      if (activeButton) {
          activeButton.classList.add('active');
      }
    }

  </script>
</body>

</html>