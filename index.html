<!DOCTYPE html>
<html lang="en">

<head>
  <title>FIT3179 Data Visualisation 2 - Fertility in Australia</title>
  <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Google font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap" rel="stylesheet">

  <!-- CSS file -->
  <link rel="stylesheet" type="text/css" href="./styles.css">

</head>

<body>

  <div class="page">

    <!-- Header -->
    <div class="header">
        <div class="decorated-header">Fertility</div>
        <div class="base-header">in Australia</div>
    </div>

    <hr>

    <!-- Overview -->
    <div class="overview">
        <div class="overview-desc">
            <p>The world is facing a fertility crisis, with declining birth rates in many countries, including Australia. Economic uncertainty, delayed family planning, and shifting societal values contribute to this trend. As populations age and birth rates fall, concerns arise about workforce shortages and economic growth. Australia and other nations are grappling with the long-term impact, prompting governments to introduce policies aimed at encouraging higher fertility rates and addressing the challenges posed by aging demographics.</p>
        </div>
        <div class="isotype">
            <div id="vis3"></div>
            <div class="isotype-desc-container">
              <div class="isotype-desc-1">7</div>
              <div class="isotype-desc-2">in</div>
              <div class="isotype-desc-3">10</div> 
              <div class="isotype-desc-4">women over 15 years of age in Australia are</div>
              <div class="isotype-desc-5">mothers.</div>
            </div>
        </div>
    </div>

    <!-- Australia vs. The World -->
    <div class="global">
      <div class="global-header">
        <hr>
        <h2>Australia vs. The World</h2>
        <hr>
      </div>
      <div class="global-choropleth">
        <div id="vis2" class="choropleth"></div>
        <div class="choropleth-desc">
          <div class="choropleth-guide">➤ Hover over the map to highlight a country</div>
          <p>As of 2023, <strong>Australia</strong> has the <strong>151st</strong> highest birth rate out of 255 countries.</p>
          <p>The countries with the <strong>highest</strong> birth rate are <strong>Central Africa</strong> (46.358 per 1000 people) and <strong>Somalia</strong> (42.964 per 1000 people), 
            whilst the countries with the <strong>lowest</strong> recorded birth rate are <strong>South Korea</strong> (4.568 per 1000 people) and the <strong>Vatican City</strong> (4.211 per 1000 people).</p>
        </div>
      </div>
    </div>

    <!-- Fertility Across the States -->
    <div class="states">
      <div class="states-header">
        <hr>
        <h2>Fertility Across the Nation</h2>
        <hr>
      </div>
      <div class="states-body">
        <div class="states-overview">
          <div class="states-subheader">Fertility In The States and Territories</div>
          <p>
            Australia's fertility rates have been declining over the past few decades, with the current 
            national average around 1.63 children per woman. States like Queensland and New South Wales show slightly higher rates.
          </p>
          <div class="parallel-guide">➤ Click on an item in the legend to highlight</div>
          <div id="vis1" class="parallel-coord"></div>
        </div>
        <div class="states-graphs">
          <div class="nation-subheader">National Births and Fertility</div>
          <div class="tabs-container">
            <div class="tabs">
                <button class="tab-button active" onclick="showTab('births')">Births</button>
                <button class="tab-button" onclick="showTab('fertility')">Fertility Rate</button>
            </div>
        
            <div id="births" class="tab-content active">
              <div class="line-guide1">➤ Use sliders to adjust year range</div>
              <div class="line-guide2">➤ Hover on the circles to see values</div>
              <div id="vis4" class="line-births"></div>
            </div>
        
            <div id="fertility" class="tab-content">
              <div class="line-guide1">➤ Use sliders to adjust year range</div>
              <div class="line-guide2">➤ Hover on the circles to see values</div>
              <div id="vis5" class="line-fertility"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="state-births">
        <div class="state-births-subheader">Births in the States and Territories</div>

      </div>
    </div>
    <!-- end pure grid group -->

  <script type="text/javascript">
    var specVis1 = "./parallel_coord.json";
    var specVis2 = "./choropleth_map.json";
    var specVis3 = "./pictogram.json";
    var specVis4 = "./line_births.json";
    var specVis5 = "./line_fertility.json";

    vegaEmbed('#vis1', specVis1, { "actions": false });

    vegaEmbed('#vis2', specVis2, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#vis3', specVis3, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#vis4', specVis4, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#vis5', specVis5, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    
    // Tabs function
    function showTab(tabName) {
      // Get all tab content and buttons
      const tabs = document.querySelectorAll('.tab-content');
      const buttons = document.querySelectorAll('.tab-button');

      // Hide all tab contents and remove active class from buttons
      tabs.forEach(tab => {
          tab.classList.remove('active');
      });
      buttons.forEach(button => {
          button.classList.remove('active');
      });

      // Show the selected tab
      document.getElementById(tabName).classList.add('active');

      // Capitalize the first letter of tabName for matching the button's textContent
      const formattedTabName = tabName === 'fertility' ? 'Fertility Rate' : 'Births';

      // Find the corresponding button and set it to active
      const activeButton = [...buttons].find(button => button.textContent.trim() === formattedTabName);
      if (activeButton) {
          activeButton.classList.add('active');
      }
    }

  </script>
</body>

</html>